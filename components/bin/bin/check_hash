#!/bin/bash
if [ $# != 1 ]
then
  echo "Usage: check_hash <filename>"
  exit
fi

hash_from_clipboard=$(xclip -o -selection clipboard | awk '{print $1}')
if [[ "$hash_from_clipboard" =~ ^[a-f0-9]{64}$ ]] # SHA256 hash
then
  echo "Checking SHA256 hash $1"
  file_hash=$(sha256sum "$1" | cut -d ' ' -f1)
elif [[ "$hash_from_clipboard" =~ ^[a-f0-9]{32}$ ]] # MD5 hash
then
  echo "Checking MD5 hash $1"
  file_hash=$(md5sum "$1" | cut -d ' ' -f1)
else
  echo "Invalid hash in clipboard"
  exit
fi

if [[ "$file_hash" == "$hash_from_clipboard" ]]
then
  echo "Hashes match: $file_hash"
else
  echo "Hash mismatch"
  echo "File hash: $file_hash"
fi
