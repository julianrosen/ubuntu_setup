#!/bin/sh
# conditional_open [executable] [window name] will open executible, provided
# that a window sharing its name does not already exist on the current desktop.
# This checks the current desktop for a matching window class name.
# This is invoked by my i3 config file

current_desktop=$(wmctrl -d | awk '/\\*/ {print $1}')
if ! wmctrl -lx | awk -v d="$current_desktop" '$2 ~ ("^" d) {print $0}' | grep -q "$2"; then
  sh -c "$1" &
fi
